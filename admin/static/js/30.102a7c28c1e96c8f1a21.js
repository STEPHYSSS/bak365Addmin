webpackJsonp([30],{ABlK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),o=n("mvHQ"),c=n.n(o),s=n("exGp"),i=n.n(s),l=n("V19L"),u=n("T+sA"),d=n("2uFj"),p={name:"",data:function(){return{tableData:[],loading:!1,current_index:"",current_SID:"",show:!1,autoHome:d.e,currentIndexCode:""}},components:{Del:n("mvu0").a,QRCode:l.a},mounted:function(){this.getList()},methods:{getList:function(){var e=this;return i()(r.a.mark(function t(){var n,a,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Object(u.a)({Action:"GetDecorateList",Type:"0"},"MShopOpera");case 4:n=t.sent,a=n.Data,e.tableData=a.DecorateList,o={SID:""},e.tableData.forEach(function(t){o.SID=t.SID,t.codeUrl=e.autoHome+"?query="+encodeURIComponent(c()(o))}),e.loading=!1,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),e.$message.error(t.t0),e.loading=!1;case 16:case"end":return t.stop()}},t,e,[[1,12]])}))()},addGood:function(){this.$router.push({path:"/weChat/manager/custom/addEdit"})},clicCode:function(e){this.currentIndexCode=e},editRowGoods:function(e){var t=this;return i()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{t.$router.push({path:"/weChat/manager/custom/addEdit",query:{SID:e.SID}})}catch(e){t.$message.error(e)}case 1:case"end":return n.stop()}},n,t)}))()},setName:function(){},delRow:function(e,t){this.show=!0,this.current_index=t,this.current_SID=e.SID},delFunction:function(e){this.show=e},confirmEnd:function(){var e=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u.a)({Action:"RemoveDecorate",SID:e.current_SID},"MShopOpera");case 3:e.tableData.splice(e.current_index,1),e.$message.success("删除成功"),e.show=!1,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.show=!1,e.$message.error(t.t0);case 12:case"end":return t.stop()}},t,e,[[0,8]])}))()},changeDef:function(e,t){var n=this;this.$confirm("是否更改默认?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){try{Object(u.a)({Action:"SetDefault",SID:t.SID,IsDefault:e,Type:"0"},"MShopOpera").Data;n.$message.success("操作成功"),setTimeout(function(){n.getList()},500),n.$message.success("操作成功")}catch(e){n.$message.error(e)}}).catch(function(){n.$message({type:"info",message:"已取消"})})}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"customManager"},[n("el-button",{staticClass:"marginBottom",attrs:{type:"primary",size:"small",disabled:e.loading},on:{click:e.addGood}},[e._v("新建自定义模块")]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{prop:"Name",label:"名称",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"Name",label:"最近应用在",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"Name",label:"共应用次数",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"IsDefault",label:"默认",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.IsDefault?n("span",[e._v("否")]):n("span",{staticStyle:{color:"#2d8cf0"}},[e._v("是")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Name",label:"操作",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.IsDefault?n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.changeDef(1,t.row)}}},[e._v("开启")]):n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.changeDef(0,t.row)}}},[e._v("关闭")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.editRowGoods(t.row)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.delRow(t.row,t.$index)}}},[e._v("删除")]),e._v(" "),n("el-popover",{attrs:{placement:"left"},model:{value:t.row.visible,callback:function(n){e.$set(t.row,"visible",n)},expression:"scoped.row.visible"}},[n("div",{staticClass:"smallRoutine"},[n("div",{staticClass:"smallRoutineTop"},[n("span",[e._v("扫码预览")]),e._v(" "),n("span",{staticClass:"close",on:{click:function(e){t.row.visible=!1}}},[e._v("×")])]),e._v(" "),n("div",{staticStyle:{width:"200px",height:"200px",border:"1px solid #efefef"}},[e.currentIndexCode===t.$index?n("QRCode",{attrs:{newWidth:200,newText:t.row.codeUrl}}):e._e()],1)]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{slot:"reference",type:"text"},on:{click:function(n){return e.clicCode(t.$index)}},slot:"reference"},[e._v("扫码预览")])],1)]}}])})],1),e._v(" "),n("Del",{attrs:{show:e.show},on:{delFunction:e.delFunction,confirmEnd:e.confirmEnd}})],1)},staticRenderFns:[]};var m=n("VU/8")(p,f,!1,function(e){n("uY0N")},"data-v-4bcd265b",null);t.default=m.exports},uY0N:function(e,t){}});
//# sourceMappingURL=30.102a7c28c1e96c8f1a21.js.map