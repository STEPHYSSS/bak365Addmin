webpackJsonp([26],{"L/2r":function(t,e){},tM60:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Xxa5"),r=n.n(o),a=n("exGp"),s=n.n(a),c=n("8YEZ"),i=n("mvu0"),l=n("T+sA"),u=n("2uFj"),d=n("Ua8o"),p=n("lbHh"),f=n.n(p),v=n("V19L"),w={name:"",data:function(){return{dataList:[],loading:!1,cateShow:!1,show:!1,AppNoMy:f.a.get("AppNo"),integralUrlGood:u.f,currentIndexCode:"",current_index:"",current_SID:""}},components:{ModifyCate:c.a,QRCode:v.a,Del:i.a},created:function(){this.getList()},methods:{getList:function(){var t=this;return s()(r.a.mark(function e(){var n,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,Object(l.a)({Action:"GetProdInfoList"},"MIntegralOpera");case 4:n=e.sent,o=n.Data,t.loading=!1,t.dataList=o.ProdInfoList||[],t.dataList.forEach(function(e){e.codeUrl=t.integralUrlGood+e.SID+"?AppNo="+t.AppNoMy+"&isIntegral=true",t.$set(e,"State","0"===e.State)}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t.$message.error(e.t0),t.loading=!1;case 15:case"end":return e.stop()}},e,t,[[0,11]])}))()},changeEnable:function(t,e){var n=this;return s()(r.a.mark(function o(){var a,s;return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=!0===t?0:1,o.prev=1,o.next=4,Object(l.a)({Action:"SetProdState",SID:e.SID,State:a},"MIntegralOpera");case 4:s=o.sent,n.$message.success(s.Message),o.next=12;break;case 8:o.prev=8,o.t0=o.catch(1),setTimeout(function(){e.State=!e.State},500),n.$message.error(o.t0);case 12:case"end":return o.stop()}},o,n,[[1,8]])}))()},copyUrl:function(t){var e=$(".el-popover").length-1;$($(".el-popover")[e]).find("input").select(),document.execCommand("Copy"),this.$Message.info("复制成功"),t.visibleUrl=!1},editRowGoods:function(t){this.$router.push({path:"/weChat/manager/integral/goodAdd",query:{SID:t.SID}})},delRow:function(t,e){this.show=!0,this.current_index=e,this.current_SID=t.SID},clicCode:function(t){this.currentIndexCode=t},upDownUrl:function(t){Object(d.b)(t)},cateFunction:function(t){this.cateShow=t},modifyCateFun:function(){this.cateShow=!0},addGood:function(){this.$router.push({path:"/weChat/manager/integral/goodAdd"})},delFunction:function(t){this.show=t},confirmEnd:function(){var t=this;return s()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.a)({Action:"RemoveProdInfo",SID:t.current_SID},"MIntegralOpera");case 3:t.dataList.splice(t.current_index,1),t.$message.success("删除成功"),t.show=!1,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t.show=!1,t.$message.error(e.t0);case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"integralGoods"},[n("div",[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addGood}},[t._v("添加积分商品")]),t._v(" "),n("el-button",{staticStyle:{"margin-left":"10px","margin-top":"10px"},attrs:{size:"small",type:"primary"},on:{click:t.modifyCateFun}},[t._v("添加/修改 类别")])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"25px"},attrs:{data:t.dataList}},[n("el-table-column",{attrs:{label:"商品",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",[n("el-col",{staticClass:"goodsInfo",attrs:{span:12}},[n("img",{attrs:{src:t._f("setImgPrex")(e.row.Img)}})]),t._v(" "),n("el-col",{staticClass:"goodInfoRight",attrs:{span:12}},[n("div",[t._v(t._s(e.row.Name))]),t._v(" "),n("span",{staticStyle:{color:"red"}},[t._v("¥"+t._s(e.row.SalePrice)+" + "+t._s(e.row.Score)+"积分")])])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"SID",label:"商品ID"}}),t._v(" "),n("el-table-column",{attrs:{label:"库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.StoreQty?n("span",[t._v(t._s(e.row.StoreQty))]):n("span",[t._v("--")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"下架"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-checkbox",{on:{change:function(n){return t.changeEnable(n,e.row)}},model:{value:e.row.State,callback:function(n){t.$set(e.row,"State",n)},expression:"scoped.row.State"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"300",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"left"},model:{value:e.row.visibleUrl,callback:function(n){t.$set(e.row,"visibleUrl",n)},expression:"scoped.row.visibleUrl"}},[n("el-input",{attrs:{readonly:"",placeholder:"商品链接"},model:{value:e.row.codeUrl,callback:function(n){t.$set(e.row,"codeUrl",n)},expression:"scoped.row.codeUrl"}},[n("el-button",{attrs:{slot:"append"},on:{click:function(n){return t.copyUrl(e.row)}},slot:"append"},[t._v("复制")])],1),t._v(" "),n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("链接")])],1),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.editRowGoods(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.delRow(e.row,e.$index)}}},[t._v("删除")]),t._v(" "),n("el-popover",{attrs:{placement:"left"},model:{value:e.row.visible,callback:function(n){t.$set(e.row,"visible",n)},expression:"scoped.row.visible"}},[n("div",{staticClass:"smallRoutine"},[n("div",{staticClass:"smallRoutineTop"},[n("span",[t._v("小程序码")]),t._v(" "),n("span",{staticClass:"close",on:{click:function(t){e.row.visible=!1}}},[t._v("×")])]),t._v(" "),n("div",{staticStyle:{width:"200px",height:"200px",border:"1px solid #efefef"}},[t.currentIndexCode===e.$index?n("QRCode",{attrs:{newWidth:200,newText:e.row.codeUrl}}):t._e()],1),t._v(" "),n("a",{attrs:{id:"downloadImg"}}),t._v(" "),n("a",{staticClass:"smallRoutineUpDown",on:{click:function(n){return t.upDownUrl(e.row.Name)}}},[t._v("下载小程序码")])]),t._v(" "),n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{slot:"reference",type:"text"},on:{click:function(n){return t.clicCode(e.$index)}},slot:"reference"},[t._v("小程序码")])],1)]}}])})],1),t._v(" "),n("Del",{attrs:{show:t.show},on:{delFunction:t.delFunction,confirmEnd:t.confirmEnd}}),t._v(" "),n("ModifyCate",{attrs:{cateShow:t.cateShow,isIntegral:!0},on:{cateFunction:t.cateFunction}})],1)},staticRenderFns:[]};var m=n("VU/8")(w,h,!1,function(t){n("L/2r")},"data-v-7130559a",null);e.default=m.exports}});
//# sourceMappingURL=26.383e175c70bdc26d58b9.js.map