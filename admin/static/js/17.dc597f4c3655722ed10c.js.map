{"version":3,"sources":["webpack:///src/view/weChatManager/goodsManager/addEditCoupon.vue","webpack:///./src/view/weChatManager/goodsManager/addEditCoupon.vue?8303","webpack:///./src/view/weChatManager/goodsManager/addEditCoupon.vue?963f"],"names":["addEditCoupon","name","components","couponList","imgLoad","ueditor1","data","_this","this","btnLoading","ruleForm","PayType","Start","assistRuleForm","BuyTime","rules","Name","required","message","trigger","validator","value","callback","Error","StoreQty","SalePrice","FeaturesShow","ImportantNotesShow","ueditorProduct","ueditorTip","currentCouponList","defaultId","fileListUp","created","$route","query","SID","getInfo","methods","_this2","asyncToGenerator_default","regenerator_default","a","mark","_callee","obj","wrap","_context","prev","next","assign_default","Action","Object","vipCard","sent","Data","Ticket","$","base64","atob","Features","ImportantNotes","Number","EndTime","Type","ImgList","publicFunction","t0","stop","changeValue","val","$set","TypeNo","cancelFun","$router","push","resetForm","formName","$refs","resetFields","currentImgs","setUEContent","upLoadImgs","imgs","arr","forEach","D","url","join","preserveFun","_ref","_this3","length","$message","info","validate","_callee2","valid","_context2","btoa","getUEContent","success","error","abrupt","_x","apply","arguments","watch","ruleForm.Type","TypeName","Price","goodsManager_addEditCoupon","render","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","label-width","label","on","prop","placeholder","$$v","expression","controls-position","min","step","step-strictly","folder","isAutoFixed","type","autosize","minRows","maxRows","maxlength","value-format","range-separator","start-placeholder","end-placeholder","_e","click","$event","valText","staticStyle","margin-left","loading","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/17.dc597f4c3655722ed10c.js","sourcesContent":["<template>\r\n  <div class=\"addEditGoods\">\r\n     <!-- 编辑，新增优惠券 -->\r\n    基本信息\r\n    <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"150px\">\r\n      <el-form-item label=\"券类型\">\r\n        <couponList @changeValue=\"changeValue\" ref=\"couponList\" :defaultId=\"defaultId\"></couponList>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品名称\" prop=\"Name\">\r\n        <el-input v-model=\"ruleForm.Name\" placeholder=\"请填写商品名称\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品售价\" prop=\"SalePrice\">\r\n        <el-input-number v-model=\"ruleForm.SalePrice\" controls-position=\"right\" :min=\"0\" :step=\"1\"\r\n                         step-strictly></el-input-number>\r\n        ¥\r\n      </el-form-item>\r\n      <el-form-item label=\"库存\" prop=\"StoreQty\">\r\n        <el-input-number v-model=\"ruleForm.StoreQty\" controls-position=\"right\" :min=\"0\" :step=\"1\"\r\n                         step-strictly></el-input-number>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品图片\" prop=\"ProdImgList\">\r\n        <imgLoad folder=\"TicketImg\" @upLoadImgs=\"upLoadImgs\" :fileListUp=\"fileListUp\" ref=\"imgLoad\"  :isAutoFixed=\"true\"></imgLoad>\r\n        (建议尺寸:800*800;大小:小于500kb;格式:JPG,PNG,JPEG)\r\n      </el-form-item>\r\n      <el-form-item label=\"商品排序\" prop=\"Sort\">\r\n        <el-input-number v-model=\"ruleForm.Sort\" controls-position=\"right\" :min=\"0\" :step=\"1\"\r\n                         step-strictly></el-input-number>\r\n      </el-form-item>\r\n      <el-form-item label=\"销量基数\" prop=\"SaleCnt\">\r\n        <el-input-number v-model=\"ruleForm.SaleCnt\" controls-position=\"right\" :min=\"0\" :step=\"1\"\r\n                         step-strictly></el-input-number>\r\n      </el-form-item>\r\n      <el-form-item label=\"预定提示\" prop=\"Tips\">\r\n        <el-input v-model=\"ruleForm.Tips\" type=\"textarea\" :autosize=\"{ minRows: 2, maxRows: 3}\"\r\n                  placeholder=\"最长可输入500个字符\" maxlength=\"500\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"支付方式\" prop=\"PayType\">\r\n        <el-radio-group v-model=\"ruleForm.PayType\">\r\n          <el-radio label=\"1\">不支持第三方支付</el-radio>\r\n          <el-radio label=\"2\">不支持微卡支付</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"购买时间\" prop=\"Start\" class=\"\">\r\n        <el-checkbox v-model=\"ruleForm.Start\">启用</el-checkbox>\r\n        <el-date-picker\r\n          v-if=\"ruleForm.Start\"\r\n          v-model=\"assistRuleForm.BuyTime\"\r\n          type=\"datetimerange\"\r\n          value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n          range-separator=\"至\"\r\n          start-placeholder=\"开始日期\"\r\n          end-placeholder=\"结束日期\">\r\n        </el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item label=\"每人限购\" prop=\"LimitCnt\">\r\n        <el-input-number v-model=\"ruleForm.LimitCnt\" controls-position=\"right\" :min=\"1\"></el-input-number>\r\n      </el-form-item>\r\n      <!--      <el-form-item label=\"商品描述\" prop=\"ProdDescribe\">-->\r\n      <!--        <el-input-->\r\n      <!--          type=\"textarea\"-->\r\n      <!--          :rows=\"3\"-->\r\n      <!--          placeholder=\"最长支持200个字符\"-->\r\n      <!--          maxlength=\"200\"-->\r\n      <!--          v-model=\"ruleForm.ProdDescribe\">-->\r\n      <!--        </el-input>-->\r\n      <!--      </el-form-item>-->\r\n      <el-form-item label=\"产品特色\" class=\"FeaturesStyle\">\r\n        <el-button type=\"text\" @click=\"FeaturesShow=true\" v-if=\"FeaturesShow===false\">+编辑</el-button>\r\n        <ueditor1 v-if=\"FeaturesShow\" :valText=\"ueditorProduct\" ref=\"Features\"></ueditor1>\r\n        <el-button type=\"text\" @click=\"FeaturesShow=false\" v-if=\"FeaturesShow===true\">隐藏</el-button>\r\n      </el-form-item>\r\n      <el-form-item label=\"重要提示\" class=\"FeaturesStyle\">\r\n        <el-button type=\"text\" @click=\"ImportantNotesShow=true\" v-if=\"ImportantNotesShow===false\">+编辑</el-button>\r\n        <ueditor1 v-if=\"ImportantNotesShow\" :valText=\"ueditorTip\" ref=\"ImportantNotes\"></ueditor1>\r\n        <el-button type=\"text\" @click=\"ImportantNotesShow=false\" v-if=\"ImportantNotesShow===true\">隐藏</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <div class=\"preserveStyle\">\r\n      <el-button @click=\"cancelFun\">取消</el-button>\r\n      <el-button @click=\"resetForm('ruleForm')\" style=\"margin-left:20px\" >重置</el-button>\r\n      <el-button type=\"primary\" style=\"margin-left:20px\" @click=\"preserveFun\" :loading=\"btnLoading\">保存</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport couponList from '@/components/selector/couponList'\r\nimport imgLoad from '@/components/download/imgLoad'\r\nimport ueditor1 from '@/components/ueditor1/'\r\nimport {getLists} from '@/api/vipCard'\r\nimport '@/config/jquery.base64.js'\r\nimport {ImgList,replacePre} from '@/config/publicFunction'\r\n\r\nexport default {\r\n  name: \"addEditCoupon\",\r\n  components: {couponList, imgLoad, ueditor1},\r\n  data() {\r\n    return {\r\n      btnLoading: false,\r\n      ruleForm: {\r\n        // 支付方式\r\n        PayType: '',\r\n        Start: 0\r\n      },\r\n      assistRuleForm: {\r\n        // 购买时间\r\n        BuyTime: []\r\n      },\r\n      rules: {\r\n        Name: [\r\n          {\r\n            required: true, message: '商品名称未填', trigger: 'blur', validator: (rules, value, callback) => {\r\n              if (!this.ruleForm.Name) {\r\n                callback(new Error('商品名称未填'))\r\n              } else {\r\n                callback()\r\n              }\r\n            }\r\n          }\r\n        ],\r\n        StoreQty: [{required: true, message: '请输入商品售价', trigger: 'blur'}],\r\n        SalePrice: [{required: true, message: '请输入库存', trigger: 'blur'}]\r\n      },\r\n      // 显示隐藏 产品特色\r\n      FeaturesShow: true,\r\n      // 显示隐藏 重要提示\r\n      ImportantNotesShow: true,\r\n      // 产品特色默认值\r\n      ueditorProduct: '',\r\n      // 重要提示默认值\r\n      ueditorTip: '',\r\n      currentCouponList: '',\r\n      defaultId: null,\r\n      // 显示在页面的商品图片\r\n      fileListUp: []\r\n    }\r\n  },\r\n  created() {\r\n    this.ruleForm = {}\r\n    if (this.$route.query.SID) {\r\n      this.getInfo()\r\n    }\r\n  },\r\n  methods: {\r\n    async getInfo() {\r\n      try {\r\n        let obj = {}\r\n        Object.assign(obj, {SID: this.$route.query.SID})\r\n        Object.assign(obj, {Action: 'GetTicket'})\r\n        let data = await getLists(obj, 'MTicketOpera')\r\n        // console.log(data, 999)\r\n        this.ruleForm = data.Data.Ticket\r\n\r\n        // console.log(this.ruleForm, 555)\r\n        this.ueditorProduct = $.base64.atob(this.ruleForm.Features,'utf8')\r\n        this.ueditorTip = $.base64.atob(this.ruleForm.ImportantNotes,'utf8')\r\n\r\n        this.ruleForm.Start = Number(this.ruleForm.Start)\r\n        if (this.ruleForm.BuyTime) {\r\n          this.ruleForm.Start = true\r\n          this.assistRuleForm.BuyTime = [this.ruleForm.BuyTime, this.ruleForm.EndTime]\r\n        } else {\r\n          this.ruleForm.Start = false\r\n        }\r\n        this.defaultId = this.ruleForm.Type\r\n\r\n\r\n        this.fileListUp = this.ruleForm.ImgList?ImgList(this.ruleForm.ImgList):[]\r\n      } catch (e) {\r\n      }\r\n    },\r\n    changeValue(val) {\r\n      this.$set(this.ruleForm, 'Type', val.TypeNo)\r\n      this.currentCouponList = val\r\n    },\r\n    cancelFun() {\r\n      this.$router.push('/weChat/manager/couponSetting')\r\n    },\r\n    resetForm(formName){\r\n      this.$refs[formName].resetFields()\r\n      this.changeValue({})\r\n      this.$refs.couponList.value = ''\r\n      this.$refs.imgLoad.currentImgs = []\r\n      this.assistRuleForm.BuyTime = []\r\n      this.ruleForm.Start = false\r\n      this.$refs.ImportantNotes.setUEContent('')\r\n      this.$refs.Features.setUEContent('')\r\n      this.ruleForm.ImgList = ''\r\n    },\r\n    upLoadImgs(imgs) {\r\n      let arr = []\r\n      imgs.forEach(D => {\r\n        arr.push(D.url)\r\n      })\r\n      this.ruleForm.ImgList = arr.join(',')\r\n    },\r\n    preserveFun() {\r\n      if(this.ruleForm.ImgList){\r\n        this.ruleForm.ImgList = replacePre(this.ruleForm,'ImgList')\r\n      }\r\n      // console.log(this.$refs.Features.getUEContent(), 5555)\r\n      // console.log(this.$refs.ImportantNotes.getUEContent(), 5555)\r\n      if (this.ruleForm.Start && this.assistRuleForm.BuyTime.length === 0) {\r\n        this.$message.info('请选择购买时间')\r\n        return\r\n      }\r\n      if (this.ruleForm.ImgList.length === 0) {\r\n        this.$message.info('请选择商品图片')\r\n        return\r\n      }\r\n\r\n      this.$refs.ruleForm.validate(async (valid) => {\r\n        if (valid) {\r\n          try {\r\n            let obj = {}\r\n            Object.assign(obj, {Action: 'SetTicket'})\r\n            Object.assign(obj, this.ruleForm)\r\n\r\n            if (this.ruleForm.Start) {\r\n              obj.Start = 1\r\n              obj.BuyTime = this.assistRuleForm.BuyTime[0]\r\n              obj.EndTime = this.assistRuleForm.BuyTime[1]\r\n            } else {\r\n              obj.Start = 0\r\n              obj.BuyTime = ''\r\n              obj.EndTime = ''\r\n            }\r\n\r\n            obj.Features = $.base64.btoa(this.$refs.Features.getUEContent(), 'utf8')\r\n            obj.ImportantNotes = $.base64.btoa(this.$refs.ImportantNotes.getUEContent(), 'utf8')\r\n            this.btnLoading = true\r\n\r\n            await getLists(obj, 'MTicketOpera')\r\n            this.btnLoading = false\r\n            this.$message.success('操作成功')\r\n            this.$router.push('/weChat/manager/couponSetting')\r\n          } catch (e) {\r\n            this.btnLoading = false\r\n            this.$message.error(e)\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    'ruleForm.Type'() {\r\n      if (this.currentCouponList) {\r\n        this.$set(this.ruleForm, 'Name', this.currentCouponList.TypeName)\r\n        this.$set(this.ruleForm, 'SalePrice', this.currentCouponList.Price)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  @import '../../../assets/css/addEditGoods.less';\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/view/weChatManager/goodsManager/addEditCoupon.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"addEditGoods\"},[_vm._v(\"\\n  基本信息\\n  \"),_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"券类型\"}},[_c('couponList',{ref:\"couponList\",attrs:{\"defaultId\":_vm.defaultId},on:{\"changeValue\":_vm.changeValue}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"prop\":\"Name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请填写商品名称\"},model:{value:(_vm.ruleForm.Name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Name\", $$v)},expression:\"ruleForm.Name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品售价\",\"prop\":\"SalePrice\"}},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":0,\"step\":1,\"step-strictly\":\"\"},model:{value:(_vm.ruleForm.SalePrice),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"SalePrice\", $$v)},expression:\"ruleForm.SalePrice\"}}),_vm._v(\"\\n      ¥\\n    \")],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"库存\",\"prop\":\"StoreQty\"}},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":0,\"step\":1,\"step-strictly\":\"\"},model:{value:(_vm.ruleForm.StoreQty),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"StoreQty\", $$v)},expression:\"ruleForm.StoreQty\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品图片\",\"prop\":\"ProdImgList\"}},[_c('imgLoad',{ref:\"imgLoad\",attrs:{\"folder\":\"TicketImg\",\"fileListUp\":_vm.fileListUp,\"isAutoFixed\":true},on:{\"upLoadImgs\":_vm.upLoadImgs}}),_vm._v(\"\\n      (建议尺寸:800*800;大小:小于500kb;格式:JPG,PNG,JPEG)\\n    \")],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品排序\",\"prop\":\"Sort\"}},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":0,\"step\":1,\"step-strictly\":\"\"},model:{value:(_vm.ruleForm.Sort),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Sort\", $$v)},expression:\"ruleForm.Sort\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"销量基数\",\"prop\":\"SaleCnt\"}},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":0,\"step\":1,\"step-strictly\":\"\"},model:{value:(_vm.ruleForm.SaleCnt),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"SaleCnt\", $$v)},expression:\"ruleForm.SaleCnt\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"预定提示\",\"prop\":\"Tips\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 2, maxRows: 3},\"placeholder\":\"最长可输入500个字符\",\"maxlength\":\"500\"},model:{value:(_vm.ruleForm.Tips),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Tips\", $$v)},expression:\"ruleForm.Tips\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"支付方式\",\"prop\":\"PayType\"}},[_c('el-radio-group',{model:{value:(_vm.ruleForm.PayType),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"PayType\", $$v)},expression:\"ruleForm.PayType\"}},[_c('el-radio',{attrs:{\"label\":\"1\"}},[_vm._v(\"不支持第三方支付\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"2\"}},[_vm._v(\"不支持微卡支付\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"购买时间\",\"prop\":\"Start\"}},[_c('el-checkbox',{model:{value:(_vm.ruleForm.Start),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Start\", $$v)},expression:\"ruleForm.Start\"}},[_vm._v(\"启用\")]),_vm._v(\" \"),(_vm.ruleForm.Start)?_c('el-date-picker',{attrs:{\"type\":\"datetimerange\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.assistRuleForm.BuyTime),callback:function ($$v) {_vm.$set(_vm.assistRuleForm, \"BuyTime\", $$v)},expression:\"assistRuleForm.BuyTime\"}}):_vm._e()],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"每人限购\",\"prop\":\"LimitCnt\"}},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":1},model:{value:(_vm.ruleForm.LimitCnt),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"LimitCnt\", $$v)},expression:\"ruleForm.LimitCnt\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"FeaturesStyle\",attrs:{\"label\":\"产品特色\"}},[(_vm.FeaturesShow===false)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.FeaturesShow=true}}},[_vm._v(\"+编辑\")]):_vm._e(),_vm._v(\" \"),(_vm.FeaturesShow)?_c('ueditor1',{ref:\"Features\",attrs:{\"valText\":_vm.ueditorProduct}}):_vm._e(),_vm._v(\" \"),(_vm.FeaturesShow===true)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.FeaturesShow=false}}},[_vm._v(\"隐藏\")]):_vm._e()],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"FeaturesStyle\",attrs:{\"label\":\"重要提示\"}},[(_vm.ImportantNotesShow===false)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.ImportantNotesShow=true}}},[_vm._v(\"+编辑\")]):_vm._e(),_vm._v(\" \"),(_vm.ImportantNotesShow)?_c('ueditor1',{ref:\"ImportantNotes\",attrs:{\"valText\":_vm.ueditorTip}}):_vm._e(),_vm._v(\" \"),(_vm.ImportantNotesShow===true)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.ImportantNotesShow=false}}},[_vm._v(\"隐藏\")]):_vm._e()],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"preserveStyle\"},[_c('el-button',{on:{\"click\":_vm.cancelFun}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoading},on:{\"click\":_vm.preserveFun}},[_vm._v(\"保存\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f77882b4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/weChatManager/goodsManager/addEditCoupon.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f77882b4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./addEditCoupon.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addEditCoupon.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addEditCoupon.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f77882b4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./addEditCoupon.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/weChatManager/goodsManager/addEditCoupon.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}