webpackJsonp([44],{G2UU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),r=a("Xxa5"),o=a.n(r),l=a("exGp"),s=a.n(l),c=a("T+sA"),m={name:"tasteList",data:function(){return{tableData:[],dynamicValidateForm:{domains:[{Name:"",Price:0}],Name:""},eidtSID:"",dialogFormVisible:!1}},created:function(){this.getInfo()},methods:{addDomain:function(){this.dynamicValidateForm.domains.push({Name:"",Price:0,key:Date.now()})},removeDomain:function(e){var t=this.dynamicValidateForm.domains.indexOf(e);-1!==t&&this.dynamicValidateForm.domains.splice(t,1)},getInfo:function(){var e=this;return s()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)({Action:"GetParamList",Type:"2"},"MBaseOpera");case 2:a=t.sent,i=a.Data,e.tableData=i.ParamInfoList;case 5:case"end":return t.stop()}},t,e)}))()},add:function(){this.dialogFormVisible=!0,this.dynamicValidateForm={domains:[{Name:"",Price:0}],Name:""}},edit:function(e){this.dialogFormVisible=!0,this.eidtSID=e.SID,this.detail()},detail:function(){var e=this;return s()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)({Action:"GetParamInfo",SID:e.eidtSID,Type:"2"},"MBaseOpera");case 2:a=t.sent,i=a.Data,e.dynamicValidateForm=i.ParamInfo,e.dynamicValidateForm.domains=i.ParamList;case 6:case"end":return t.stop()}},t,e)}))()},sure:function(){var e=this;return s()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.dynamicValidateForm.domains=e.dynamicValidateForm.domains.map(function(e,t){return{Name:e.Name,Price:e.Price}}),t.next=3,Object(c.a)({Action:"SetParamInfo",Name:e.dynamicValidateForm.Name,AttributeList:n()(e.dynamicValidateForm.domains),Type:"2",SID:e.eidtSID?e.eidtSID:""},"MBaseOpera");case 3:a=t.sent,a.Data,e.getInfo(),e.dialogFormVisible=!1;case 7:case"end":return t.stop()}},t,e)}))()},del:function(e){var t=this;this.$confirm("是否删除此属性?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.a)({Action:"RemoveParamInfo",SID:e.SID,Type:"2"},"MBaseOpera").Data;t.getInfo()}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tasteList"},[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]),e._v(" "),a("el-table",{staticStyle:{width:"90%","margin-top":"30px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"Name",label:"商品属性名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品属性值",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.AttributeList,function(t,i){return a("span",{key:i},[e._v("\n          "+e._s(t.Name+"(￥"+t.Price+") ,")+"\n        ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.SID?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.del(t.row,t.$index)}}},[e._v("删除")]):e._e(),e._v(" "),t.row.SID?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.edit(t.row,t.$index)}}},[e._v("编辑")]):e._e()]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"商品属性信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"Name",label:"商品属性名",rules:[{required:!0,message:"请输入商品属性名",trigger:"blur"}]}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.dynamicValidateForm.Name,callback:function(t){e.$set(e.dynamicValidateForm,"Name",t)},expression:"dynamicValidateForm.Name"}})],1),e._v(" "),e._l(e.dynamicValidateForm.domains,function(t,i){return a("el-form-item",{key:i,attrs:{label:"商品属性值",prop:"domains."+i+".Name",rules:{required:!0,message:"属性值不能为空",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.Name,callback:function(a){e.$set(t,"Name",a)},expression:"domain.Name"}}),e._v("\n        ￥"),a("el-input",{staticStyle:{width:"50px"},model:{value:t.Price,callback:function(a){e.$set(t,"Price",a)},expression:"domain.Price"}}),e._v(" "),a("el-button",{on:{click:function(a){return a.preventDefault(),e.removeDomain(t)}}},[e._v("删除")])],1)}),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.addDomain}},[e._v("新增属性值")])],1)],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sure}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},u=a("VU/8")(m,d,!1,null,null,null);t.default=u.exports}});
//# sourceMappingURL=44.80152b9ae758490678f4.js.map