{"version":3,"sources":["webpack:///src/view/weChatManager/activityManager/addEdit/index.vue","webpack:///./src/view/weChatManager/activityManager/addEdit/index.vue?3f7b","webpack:///./src/view/weChatManager/activityManager/addEdit/index.vue?6c45"],"names":["addEdit","name","components","goodType","Goods","goods","imgLoad","ueditor1","mallGoods","QRCode","qrcodejs","data","_this","this","ruleForm","Type","Start","SalePrice","MaxBuyCnt","ProdList","multipleL","activityDate","activeUrlGood","config","AppNoMy","js_cookie_default","a","get","rules","ProdNo","rulesFrom","Name","StoreQty","ShopInfo","PayType","required","message","trigger","validator","value","callback","Error","loading","goodsShow","goodsNormsIndex","fileListUpMain","fileListUpList","integralStateList","utils","showCheckTicket","checkClick","checkList","disabledTakeout","disabledLogistics","FeaturesShow","ImportantNotesShow","activeTypeNorms","codeUrl","prodListArr","created","$route","query","SID","getInfo","methods","_this2","asyncToGenerator_default","regenerator_default","mark","_callee","info","res","ProdArr","SurplusQty","Features","ImportantNotes","wrap","_context","prev","next","Object","vipCard","Action","promise_default","all","sent","Data","Promotion","ItemList","StartDate","EndDate","Number","SpecType","$","base64","atob","replace","setTimeout","$refs","setUEContent","t0","stop","changeNorms","selectGoods","index","changeDig","bool","sureGood","val","upLoadImgsMain","arr","length","Img","url","upLoadImgsList","imgs","forEach","D","push","ImgList","join","CheckTicketFun","_this3","newArr","lodash_default","find","_setData","label","id","nameArr","idArr","setData","PickShopName","beforeClose","done","changeCheckbox","indexOf","cancelFun","$router","preserveFun","_ref","_this4","OldPrice","Stock","ProdSID","SpecSID","i","undefined","$message","error","validate","_callee2","valid","obj","_context2","abrupt","cloneDeep","getUEContent","btoa","stringify_default","success","Message","_x","apply","arguments","setInputDec","FinHour","toString","split","watch","activityManager_addEdit","render","_vm","_h","$createElement","_c","_self","staticClass","_v","directives","rawName","expression","ref","attrs","model","label-width","key","placeholder","disabled","on","change","$$v","$set","_l","item","staticStyle","margin-left","type","size","click","$event","margin-top","width","prop","align","scopedSlots","_u","fn","scope","_s","row","text-align","border","maxlength","oninput","domProps","input","target","composing","range-separator","start-placeholder","end-placeholder","value-format","controls-position","min","_e","prodList","title","before-close","visible","update:visible","slot","newWidth","newText","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/29.82e1c40deef692a2cabd.js","sourcesContent":["<template>\r\n  <div class=\"addEditActive\">\r\n    <!-- 活动详情 -->\r\n    基本信息\r\n    <el-form\r\n      :model=\"ruleForm\"\r\n      :rules=\"rules\"\r\n      ref=\"ruleForm\"\r\n      label-width=\"150px\"\r\n      v-loading=\"loading\"\r\n    >\r\n      <el-form-item label=\"活动类型\" :key=\"6\">\r\n        <el-select\r\n          v-model=\"ruleForm.Type\"\r\n          placeholder=\"请选择\"\r\n          @change=\"changeNorms\"\r\n          :disabled=\"this.$route.query.SID ? true : false\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in activeTypeNorms\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          ></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"商品选择\" :key=\"1\">\r\n        <!-- <el-input v-model=\"ruleForm.ProdNo\" :readonly=\"true\" placeholder=\"请选择商品\"></el-input> -->\r\n        <el-button\r\n          type=\"primary\"\r\n          style=\"margin-left: 10px\"\r\n          size=\"medium\"\r\n          @click=\"selectGoods(null)\"\r\n          >选择商品</el-button\r\n        >\r\n        <!-- 选择商品之后展示的表格 -->\r\n        <!-- v-if=\"ruleForm.ProdList&&ruleForm.SpecType!=='1'\" -->\r\n        <el-table\r\n          style=\"margin-top: 10px; width: 700px\"\r\n          ref=\"ProdNoList\"\r\n          :data=\"ruleForm.ProdList\"\r\n        >\r\n          <el-table-column\r\n            prop=\"Name\"\r\n            label=\"商品名称\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            prop=\"ProdNo\"\r\n            label=\"商品编号\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            prop=\"Stock\"\r\n            label=\"商品库存\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column label=\"商品原价\" align=\"center\">\r\n            <template slot-scope=\"scope\">¥{{scope.row.OldPrice}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"SalePrice\" label=\"活动价格\" align=\"center\">\r\n            <template slot-scope=\"{ row }\">\r\n              <input style=\"width: 100%; text-align: center;border: 1px solid #c1c1c1\" maxlength=\"10\"\r\n                class=\"number\" type=\"text\"\r\n                oninput=\"value=value.replace(/[^\\d.]/g, '').replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/,'$1$2.$3')\"\r\n                v-model=\"row.SalePrice\"\r\n              />\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"StoreQty\" label=\"活动数量\" align=\"center\">\r\n            <template slot-scope=\"{ row }\">\r\n              <input\r\n                oninput=\"value=value.replace(/[^\\d]/g, '').replace(/^0{1,}/g,'')\"\r\n                maxlength=\"10\"\r\n                class=\"number\" style=\"width: 100%; text-align: center;border: 1px solid #c1c1c1\"\r\n                type=\"text\"\r\n                v-model=\"row.StoreQty\"\r\n              />\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"SurplusQty\"\r\n            label=\"剩余数量\"\r\n            align=\"center\"\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <input\r\n              style=\"width: 100%; text-align: center;border: 1px solid #c1c1c1\"\r\n                oninput=\"value=value.replace(/[^\\d]/g, '').replace(/^0{1,}/g,'')\"\r\n                maxlength=\"10\"\r\n                class=\"number\"\r\n                type=\"text\"\r\n                v-model=\"row.SurplusQty\"\r\n              />\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-form-item>\r\n\r\n      <!-- <el-form-item\r\n        label=\"秒杀售价\"\r\n        prop=\"SalePrice\"\r\n        v-if=\"(ruleForm.ProdList&&ruleForm.SpecType=='1')\"\r\n      >\r\n        ¥\r\n        <el-input-number v-model=\"ruleForm.SalePrice\" controls-position=\"right\" :min=\"0\"></el-input-number>\r\n      </el-form-item>\r\n      <el-form-item label=\"库存\" prop=\"StoreQty\" v-if=\"ruleForm.ProdList&&ruleForm.SpecType=='1'\">\r\n        ¥\r\n        <el-input-number\r\n          :step=\"1\"\r\n          v-model=\"ruleForm.StoreQty\"\r\n          controls-position=\"right\"\r\n          :min=\"0\"\r\n          @change=\"setInputDec(ruleForm.StoreQty,'StoreQty')\"\r\n        ></el-input-number>\r\n      </el-form-item>\r\n      <el-form-item\r\n        v-if=\"ruleForm.ProdList&&ruleForm.SpecType=='1'\"\r\n        label=\"默认已售多少件\"\r\n        prop=\"SurplusQty\"\r\n      >\r\n        <el-input-number v-model=\"ruleForm.SurplusQty\" controls-position=\"right\" :min=\"0\"></el-input-number>\r\n      </el-form-item>-->\r\n      <el-form-item label=\"活动名称\" prop=\"Name\">\r\n        <el-input\r\n          v-model=\"ruleForm.Name\"\r\n          placeholder=\"请填写活动名称\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"活动时间\" prop=\"activityDate\" >\r\n        <el-date-picker\r\n        style=\"width:380px\"\r\n          v-model=\"activityDate\"\r\n          type=\"datetimerange\"\r\n          range-separator=\"至\"\r\n          start-placeholder=\"开始时间\"\r\n          end-placeholder=\"结束时间\"\r\n          value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n        ></el-date-picker>\r\n      </el-form-item>\r\n      <!-- <el-form-item label=\"主活动图片\" prop=\"Img\">\r\n        <imgLoad\r\n          folder=\"activeImg\"\r\n          :isAutoFixed=\"true\"\r\n          @upLoadImgs=\"upLoadImgsMain\"\r\n          :fileListUp=\"fileListUpMain\"\r\n          :limit=\"1\"\r\n        ></imgLoad>(建议尺寸:800*800;大小:小于500kb;格式:JPG,PNG,JPEG)\r\n      </el-form-item>-->\r\n      <!-- <el-form-item label=\"活动图片\" prop=\"ImgList\">\r\n        <imgLoad\r\n          folder=\"activeImg\"\r\n          :isAutoFixed=\"true\"\r\n          @upLoadImgs=\"upLoadImgsList\"\r\n          :fileListUp=\"fileListUpList\"\r\n        ></imgLoad>(建议尺寸:800*800;大小:小于500kb;格式:JPG,PNG,JPEG)\r\n      </el-form-item>-->\r\n      <el-form-item label=\"最大购买数量\" prop=\"MaxBuyCnt\">\r\n        <el-input-number\r\n          v-model=\"ruleForm.MaxBuyCnt\"\r\n          controls-position=\"right\"\r\n          :min=\"0\"\r\n        ></el-input-number>\r\n        <span class=\"Spancolor\">(不填或者0的时候，不限制购买数量)</span>\r\n      </el-form-item>\r\n      <el-form-item label=\"状态\" prop=\"Start\">\r\n        <el-select v-model=\"ruleForm.Start\" placeholder=\"请选择\">\r\n          <el-option label=\"启动\" value=\"1\">启动</el-option>\r\n          <el-option label=\"关闭\" value=\"0\">关闭</el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <!-- <el-form-item label=\"供货门店\" prop=\"ShopInfo\">\r\n        <el-input readonly v-model=\"ruleForm.PickShopName\" placeholder=\"请选择门店\"></el-input>\r\n        <el-button type=\"primary\" style=\"margin-left:10px\" size=\"medium\" @click=\"PickShopFun\">...</el-button>\r\n      </el-form-item>-->\r\n      <!-- <el-form-item label=\"配送方式\" prop=\"DeliveryType\">\r\n      <el-checkbox-group v-model=\"ruleForm.DeliveryType\" @change=\"changeCheckbox\">-->\r\n      <!-- <el-checkbox label=\"3\" :disabled=\"disabledLogistics\">物流配送</el-checkbox>\r\n      <el-checkbox label=\"2\" :disabled=\"disabledTakeout\">外卖配送</el-checkbox>-->\r\n      <!-- <el-checkbox label=\"1\">门店自取</el-checkbox>\r\n      </el-checkbox-group>-->\r\n      <!-- <div style=\"color:#999\">物流与配送冲突</div> -->\r\n      <!-- </el-form-item> -->\r\n      <!-- <el-form-item label=\"支付方式\" prop=\"PayType\">\r\n        <el-checkbox-group v-model=\"ruleForm.PayType\">\r\n          <el-checkbox label=\"2\">微信支付</el-checkbox>\r\n          <el-checkbox label=\"1\">微卡支付</el-checkbox>\r\n        </el-checkbox-group>\r\n      </el-form-item>-->\r\n      <el-form-item label=\"产品特色\" prop=\"Features\" class=\"FeaturesStyle\">\r\n        <el-button\r\n          type=\"text\"\r\n          @click=\"FeaturesShow = true\"\r\n          v-if=\"FeaturesShow === false\"\r\n          >+编辑</el-button\r\n        >\r\n        <ueditor1 v-if=\"FeaturesShow\" ref=\"Features\"></ueditor1>\r\n        <el-button\r\n          type=\"text\"\r\n          @click=\"FeaturesShow = false\"\r\n          v-if=\"FeaturesShow === true\"\r\n          >隐藏</el-button\r\n        >\r\n      </el-form-item>\r\n      <el-form-item\r\n        label=\"重要提示\"\r\n        prop=\"ImportantNotes\"\r\n        class=\"FeaturesStyle\"\r\n      >\r\n        <el-button\r\n          type=\"text\"\r\n          @click=\"ImportantNotesShow = true\"\r\n          v-if=\"ImportantNotesShow === false\"\r\n          >+编辑</el-button\r\n        >\r\n        <ueditor1 v-if=\"ImportantNotesShow\" ref=\"ImportantNotes\"></ueditor1>\r\n        <el-button\r\n          type=\"text\"\r\n          @click=\"ImportantNotesShow = false\"\r\n          v-if=\"ImportantNotesShow === true\"\r\n          >隐藏</el-button\r\n        >\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <!-- <Goods :goodsShow=\"goodsShow\" @changeDig=\"changeDig\" @sureGood=\"sureGood\"></Goods> -->\r\n    <mall-goods\r\n      :goodsShow=\"goodsShow\"\r\n      @changeDig=\"changeDig\"\r\n      @sureGood=\"sureGood\"\r\n      :prodList=\"prodListArr\"\r\n    ></mall-goods>\r\n    <el-dialog\r\n      class=\"areaTree TicketDialog\"\r\n      :title=\"'选择门店'\"\r\n      width=\"600px\"\r\n      :before-close=\"beforeClose\"\r\n      :visible.sync=\"showCheckTicket\"\r\n    >\r\n      <div class=\"addScroll\">\r\n        <el-checkbox-group v-model=\"checkClick\">\r\n          <el-checkbox\r\n            :label=\"item.SID\"\r\n            v-for=\"item in checkList\"\r\n            :key=\"item.SID\"\r\n            >{{ item.Name }}</el-checkbox\r\n          >\r\n        </el-checkbox-group>\r\n      </div>\r\n      <div slot=\"footer\" class=\"dialog-footer\" style=\"text-align: center\">\r\n        <el-button @click=\"showCheckTicket = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"CheckTicketFun\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <div class=\"preserveStyle\">\r\n      <el-button @click=\"cancelFun\">取消</el-button>\r\n      <el-button type=\"primary\" style=\"margin-left: 20px\" @click=\"preserveFun\"\r\n        >保存</el-button\r\n      >\r\n    </div>\r\n\r\n    <div class=\"active-code-style\" v-if=\"codeUrl\">\r\n      <div class=\"active-code-style-title\">手机微信扫码浏览</div>\r\n      <QRCode\r\n        :newWidth=\"200\"\r\n        :newText=\"\r\n          activeUrlGood +\r\n          codeUrl +\r\n          '?AppNo=' +\r\n          AppNoMy +\r\n          '&seckill=true&isBrowse=true'\r\n        \"\r\n      ></QRCode>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addScroll, ImgList, replacePre } from \"@/config/publicFunction\";\r\nimport { integralStateList, activeTypeNorms } from \"@/config/utils\";\r\nimport { getLists } from \"@/api/vipCard\";\r\nimport { activeUrlGood } from \"@/config/index\";\r\nimport goodType from \"@/components/selector/goodType\";\r\nimport Goods from \"@/components/Dialog/goods\";\r\nimport mallGoods from \"@/components/Dialog/mallGoods\";\r\nimport imgLoad from \"@/components/download/imgLoad\";\r\nimport ueditor1 from \"@/components/ueditor1/\";\r\nimport * as ruleText from \"@/view/wechatManager/rulesFrom\";\r\nimport _ from \"lodash\";\r\nimport \"@/config/jquery.base64.js\";\r\nimport QRCode from \"@/components/qrcodejs/qrcodejs\";\r\nimport Cookies from \"js-cookie\";\r\nexport default {\r\n  name: \"\",\r\n  components: { goodType, Goods, imgLoad, ueditor1, mallGoods, QRCode },\r\n  data() {\r\n    return {\r\n      ruleForm: {\r\n        Type: \"1\",\r\n        //    DeliveryType: [\"2\", \"1\"],\r\n        Start: \"1\",\r\n        SalePrice: 0,\r\n        MaxBuyCnt: 0,\r\n        ProdList: [],\r\n      },\r\n      multipleL: \"\",\r\n      activityDate: [],\r\n      activeUrlGood: activeUrlGood,\r\n      AppNoMy: Cookies.get(\"AppNo\"),\r\n      rules: {\r\n        ProdNo: [ruleText.ProdNo(this, \"请选择活动商品\")],\r\n        Name: [ruleText.Name(this, \"请填写活动名称\")],\r\n        StoreQty: [ruleText.StoreQty(this)],\r\n        ShopInfo: [ruleText.ShopInfo(this)],\r\n        PayType: [\r\n          { required: true, message: \"请选择支付方式\", trigger: \"change\" },\r\n        ],\r\n        SalePrice: [\r\n          { required: true, message: \"请填写秒杀售价\", trigger: \"blur\" },\r\n        ],\r\n        activityDate: [\r\n          {\r\n            required: true,\r\n            message: \"请选择活动日期\",\r\n            trigger: \"change\",\r\n            validator: (rules, value, callback) => {\r\n              if (!this.activityDate) {\r\n                callback(new Error(\"请选择活动日期\"));\r\n              } else {\r\n                callback();\r\n              }\r\n            },\r\n          },\r\n        ],\r\n      },\r\n      loading: false,\r\n      goodsShow: false,\r\n      goodsNormsIndex: 0,\r\n      fileListUpMain: [],\r\n      fileListUpList: [],\r\n      integralStateList: integralStateList,\r\n      showCheckTicket: false,\r\n      // 门店前选中的数据\r\n      checkClick: [],\r\n      checkList: [],\r\n      disabledTakeout: false,\r\n      disabledLogistics: true,\r\n      FeaturesShow: true,\r\n      ImportantNotesShow: true,\r\n      activeTypeNorms: activeTypeNorms,\r\n      codeUrl: \"\",\r\n      prodListArr: [],\r\n    };\r\n  },\r\n  created() {\r\n    // console.log(this.$route.query.SID, \"sid\");\r\n    this.codeUrl = this.$route.query.SID;\r\n    this.getInfo();\r\n  },\r\n  methods: {\r\n    async getInfo() {\r\n      try {\r\n        this.loading = true;\r\n        let info = this.$route.query.SID\r\n          ? getLists(\r\n              {\r\n                Action: \"GetPromotion\",\r\n                SID: this.$route.query.SID,\r\n              },\r\n              \"MPromotionOpera\"\r\n            )\r\n          : [];\r\n        let res = await Promise.all([info]);\r\n        this.loading = false;\r\n        if (this.$route.query.SID) {\r\n          this.ruleForm = res[0].Data.Promotion;\r\n          this.ruleForm.ProdList = res[0].Data.ItemList;\r\n          this.prodListArr = res[0].Data.ItemList;\r\n\r\n          this.activityDate = [this.ruleForm.StartDate, this.ruleForm.EndDate];\r\n\r\n          this.ruleForm.MaxBuyCnt = this.ruleForm.MaxBuyCnt\r\n            ? Number(this.ruleForm.MaxBuyCnt)\r\n            : 0;\r\n\r\n          // this.ruleForm.ProdNo = \"\";\r\n          // this.ruleForm.ProdList.forEach(D => {\r\n          //   this.ruleForm.ProdNo +=\r\n          //     D.ProdNo + (this.ruleForm.ProdList.length > 1 ? \";\" : \"\");\r\n          // });\r\n          if (this.ruleForm.SpecType === \"1\") {\r\n            // 单规格\r\n            let ProdArr = this.ruleForm.ProdList[0];\r\n            this.ruleForm.SalePrice = ProdArr.SalePrice;\r\n            this.ruleForm.StoreQty = ProdArr.StoreQty;\r\n            let SurplusQty =\r\n              Number(ProdArr.StoreQty) - Number(ProdArr.SurplusQty);\r\n            this.ruleForm.SurplusQty = SurplusQty;\r\n            // console.log(this.ruleForm, 888);\r\n          }\r\n\r\n          let Features = $.base64.atob(this.ruleForm.Features, \"utf8\");\r\n          let ImportantNotes = $.base64.atob(\r\n            this.ruleForm.ImportantNotes,\r\n            \"utf8\"\r\n          );\r\n          Features = Features.replace(\r\n            /src=\"Files/g,\r\n            `src=\"${process.env.Prefix}Files`\r\n          );\r\n          ImportantNotes = ImportantNotes.replace(\r\n            /src=\"Files/g,\r\n            `src=\"${process.env.Prefix}Files`\r\n          );\r\n          setTimeout(() => {\r\n            this.$refs.Features.setUEContent(Features);\r\n            this.$refs.ImportantNotes.setUEContent(ImportantNotes);\r\n          }, 300);\r\n        }\r\n      } catch (e) {}\r\n\r\n      // this.fileListUpMain = this.ruleForm.Img ? ImgList(this.ruleForm.Img) : [];\r\n      // this.fileListUpList = this.ruleForm.ImgList\r\n      //   ? ImgList(this.ruleForm.ImgList)\r\n      //   : [];\r\n    },\r\n    changeNorms() {},\r\n    selectGoods(index) {\r\n      // 商品编号弹框\r\n      this.prodListArr = this.prodListArr;\r\n      this.goodsShow = true;\r\n      this.goodsNormsIndex = index;\r\n    },\r\n    changeDig(bool) {\r\n      this.goodsShow = bool;\r\n    },\r\n    // 获取的商品的名字和编号\r\n    sureGood(val) {\r\n      this.goodsShow = false;\r\n      this.ruleForm.ProdList = val;\r\n      // this.ruleForm.ProdNo = \"\";\r\n      // this.ruleForm.SpecType = val[0].SpecType;\r\n\r\n      // val.forEach(D => {\r\n      //   if (this.ruleForm.SpecType === \"3\") {\r\n      //     this.ruleForm.SpecSID += D.SpecSID + (val.length > 1 ? \";\" : \"\");\r\n      //   } else {\r\n      //     this.ruleForm.ProdNo += D.ProdNo + (val.length > 1 ? \";\" : \"\");\r\n      //   }\r\n      // });\r\n    },\r\n    upLoadImgsMain(arr) {\r\n      // 图片\r\n      if (arr.length > 0) {\r\n        this.ruleForm.Img = arr[0].url;\r\n      } else {\r\n        this.ruleForm.Img = \"\";\r\n      }\r\n    },\r\n    upLoadImgsList(imgs) {\r\n      // 图片集\r\n      let arr = [];\r\n      imgs.forEach((D) => {\r\n        arr.push(D.url);\r\n      });\r\n      this.ruleForm.ImgList = arr.join(\",\");\r\n    },\r\n    CheckTicketFun() {\r\n      let newArr = [];\r\n      //供货门店\r\n      this.checkClick.forEach((D) => {\r\n        newArr.push(_.find(this.checkList, { SID: D }));\r\n      });\r\n      let { nameArr, idArr } = setData(newArr, \"Name\", \"SID\");\r\n      this.ruleForm.PickShopName = nameArr.join(\",\");\r\n      this.ruleForm.ShopInfo = this.checkClick.join(\",\");\r\n      this.showCheckTicket = false;\r\n      this.checkClick = [];\r\n    },\r\n    beforeClose(done) {\r\n      // 提货门店的弹框关闭\r\n      done();\r\n    },\r\n    changeCheckbox(val) {\r\n      if (val.indexOf(\"3\") > -1) {\r\n        //选择了物流\r\n        this.disabledTakeout = true;\r\n      } else if (val.indexOf(\"2\") > -1) {\r\n        this.disabledLogistics = true;\r\n      } else {\r\n        this.disabledTakeout = false;\r\n        this.disabledLogistics = false;\r\n      }\r\n    },\r\n    cancelFun() {\r\n      // 取消\r\n      // this.$router.push(\"/weChat/manager/integral/goodSetting\");\r\n      this.$router.push(\"/weChat/manager/activity/goodSetting\");\r\n    },\r\n    preserveFun() {\r\n      let arr = [];\r\n      this.ruleForm.ProdList.forEach((val) => {\r\n        arr.push({\r\n          Name: val.Name,\r\n          StoreQty: val.StoreQty,\r\n          OldPrice: val.OldPrice,\r\n          SalePrice: val.SalePrice,\r\n          Stock: val.Stock,\r\n          SurplusQty: val.SurplusQty,\r\n          ProdSID: val.ProdSID,\r\n          SpecSID: val.SpecSID,\r\n          ProdNo: val.ProdNo,\r\n          SpecType: val.SpecType,\r\n        });\r\n      });\r\n      this.ruleForm.ProdList = arr;\r\n        for(let i = 0;i<this.ruleForm.ProdList.length;i++){\r\n          if(this.ruleForm.ProdList[i].SalePrice===undefined){\r\n            this.$message.error(\"请填写活动价格\")\r\n            return false;\r\n          }\r\n        }\r\n        this.$refs[\"ruleForm\"].validate(async (valid) => {\r\n          if (!valid) {\r\n            return false;\r\n          } else {\r\n            try {\r\n              let obj = _.cloneDeep(this.ruleForm);              \r\n              let Features = this.$refs.Features.getUEContent();\r\n              Features = Features.replace(/src=\"\\.\\.\\/Files/g, `src=\"Files`);\r\n              obj.Features = $.base64.btoa(Features, \"utf8\");\r\n              let ImportantNotes = this.$refs.ImportantNotes.getUEContent();\r\n              ImportantNotes = ImportantNotes.replace(\r\n                /src=\"\\.\\.\\/Files/g,\r\n                `src=\"Files`\r\n              );\r\n              obj.ImportantNotes = $.base64.btoa(ImportantNotes, \"utf8\");\r\n\r\n              if (this.activityDate) {\r\n                obj.StartDate = this.activityDate[0];\r\n                obj.EndDate = this.activityDate[1];\r\n              }\r\n              obj.ProdList = JSON.stringify(obj.ProdList);\r\n              obj.Action = \"SetPromotionInfo\";\r\n              let data = await getLists(obj, \"MPromotionOpera\");\r\n              this.$message.success(\"操作成功,可用二维码浏览\");\r\n              setTimeout(() => {\r\n                this.$router.push(\"/weChat/manager/activity/goodSetting\");\r\n              }, 300);\r\n              this.codeUrl = data.Message;\r\n            } catch (e) {\r\n              this.$message.error(e);\r\n            }\r\n          }\r\n        });\r\n    },\r\n    setInputDec(FinHour, val) {\r\n      //不让填写小数\r\n      if (!FinHour) return;\r\n      this.ruleForm[val] = FinHour.toString().split(\".\")[0];\r\n    },\r\n  },\r\n  watch: {},\r\n};\r\n\r\nfunction setData(data, label, id) {\r\n  let arr = data;\r\n  let nameArr = [];\r\n  let idArr = [];\r\n  if (arr.length > 0) {\r\n    arr.forEach((D) => {\r\n      nameArr.push(D[label]);\r\n      idArr.push(D[id]);\r\n    });\r\n  }\r\n  return {\r\n    nameArr,\r\n    idArr,\r\n  };\r\n}\r\nfunction setJoin(item) {\r\n  return typeof item !== \"string\" && item ? item.join(\",\") : item;\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.addEditActive {\r\n  .el-input {\r\n    width: 300px;\r\n  }\r\n  .Spancolor{\r\n    color: red;\r\n  }\r\n  .el-input-number {\r\n    .el-input {\r\n      width: auto;\r\n    }\r\n  }\r\n  .FeaturesStyle {\r\n    .el-form-item__content {\r\n      line-height: 20px;\r\n    }\r\n  }\r\n  .active-code-style {\r\n    position: fixed;\r\n    top: 150px;\r\n    right: 150px;\r\n    .active-code-style-title {\r\n      text-align: center;\r\n      padding: 8px;\r\n      color: #409eff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/view/weChatManager/activityManager/addEdit/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"addEditActive\"},[_vm._v(\"\\n  基本信息\\n  \"),_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"150px\"}},[_c('el-form-item',{key:6,attrs:{\"label\":\"活动类型\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"disabled\":this.$route.query.SID ? true : false},on:{\"change\":_vm.changeNorms},model:{value:(_vm.ruleForm.Type),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Type\", $$v)},expression:\"ruleForm.Type\"}},_vm._l((_vm.activeTypeNorms),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{key:1,attrs:{\"label\":\"商品选择\"}},[_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":function($event){return _vm.selectGoods(null)}}},[_vm._v(\"选择商品\")]),_vm._v(\" \"),_c('el-table',{ref:\"ProdNoList\",staticStyle:{\"margin-top\":\"10px\",\"width\":\"700px\"},attrs:{\"data\":_vm.ruleForm.ProdList}},[_c('el-table-column',{attrs:{\"prop\":\"Name\",\"label\":\"商品名称\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"ProdNo\",\"label\":\"商品编号\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Stock\",\"label\":\"商品库存\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"商品原价\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"¥\"+_vm._s(scope.row.OldPrice))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"SalePrice\",\"label\":\"活动价格\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(row.SalePrice),expression:\"row.SalePrice\"}],staticClass:\"number\",staticStyle:{\"width\":\"100%\",\"text-align\":\"center\",\"border\":\"1px solid #c1c1c1\"},attrs:{\"maxlength\":\"10\",\"type\":\"text\",\"oninput\":\"value=value.replace(/[^\\\\d.]/g, '').replace(/^(\\\\-)*(\\\\d+)\\\\.(\\\\d\\\\d).*$/,'$1$2.$3')\"},domProps:{\"value\":(row.SalePrice)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(row, \"SalePrice\", $event.target.value)}}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"StoreQty\",\"label\":\"活动数量\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(row.StoreQty),expression:\"row.StoreQty\"}],staticClass:\"number\",staticStyle:{\"width\":\"100%\",\"text-align\":\"center\",\"border\":\"1px solid #c1c1c1\"},attrs:{\"oninput\":\"value=value.replace(/[^\\\\d]/g, '').replace(/^0{1,}/g,'')\",\"maxlength\":\"10\",\"type\":\"text\"},domProps:{\"value\":(row.StoreQty)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(row, \"StoreQty\", $event.target.value)}}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"SurplusQty\",\"label\":\"剩余数量\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(row.SurplusQty),expression:\"row.SurplusQty\"}],staticClass:\"number\",staticStyle:{\"width\":\"100%\",\"text-align\":\"center\",\"border\":\"1px solid #c1c1c1\"},attrs:{\"oninput\":\"value=value.replace(/[^\\\\d]/g, '').replace(/^0{1,}/g,'')\",\"maxlength\":\"10\",\"type\":\"text\"},domProps:{\"value\":(row.SurplusQty)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(row, \"SurplusQty\", $event.target.value)}}})]}}])})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"活动名称\",\"prop\":\"Name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请填写活动名称\"},model:{value:(_vm.ruleForm.Name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Name\", $$v)},expression:\"ruleForm.Name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"活动时间\",\"prop\":\"activityDate\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"380px\"},attrs:{\"type\":\"datetimerange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始时间\",\"end-placeholder\":\"结束时间\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},model:{value:(_vm.activityDate),callback:function ($$v) {_vm.activityDate=$$v},expression:\"activityDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"最大购买数量\",\"prop\":\"MaxBuyCnt\"}},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":0},model:{value:(_vm.ruleForm.MaxBuyCnt),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MaxBuyCnt\", $$v)},expression:\"ruleForm.MaxBuyCnt\"}}),_vm._v(\" \"),_c('span',{staticClass:\"Spancolor\"},[_vm._v(\"(不填或者0的时候，不限制购买数量)\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"状态\",\"prop\":\"Start\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.ruleForm.Start),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Start\", $$v)},expression:\"ruleForm.Start\"}},[_c('el-option',{attrs:{\"label\":\"启动\",\"value\":\"1\"}},[_vm._v(\"启动\")]),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"关闭\",\"value\":\"0\"}},[_vm._v(\"关闭\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"FeaturesStyle\",attrs:{\"label\":\"产品特色\",\"prop\":\"Features\"}},[(_vm.FeaturesShow === false)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.FeaturesShow = true}}},[_vm._v(\"+编辑\")]):_vm._e(),_vm._v(\" \"),(_vm.FeaturesShow)?_c('ueditor1',{ref:\"Features\"}):_vm._e(),_vm._v(\" \"),(_vm.FeaturesShow === true)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.FeaturesShow = false}}},[_vm._v(\"隐藏\")]):_vm._e()],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"FeaturesStyle\",attrs:{\"label\":\"重要提示\",\"prop\":\"ImportantNotes\"}},[(_vm.ImportantNotesShow === false)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.ImportantNotesShow = true}}},[_vm._v(\"+编辑\")]):_vm._e(),_vm._v(\" \"),(_vm.ImportantNotesShow)?_c('ueditor1',{ref:\"ImportantNotes\"}):_vm._e(),_vm._v(\" \"),(_vm.ImportantNotesShow === true)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.ImportantNotesShow = false}}},[_vm._v(\"隐藏\")]):_vm._e()],1)],1),_vm._v(\" \"),_c('mall-goods',{attrs:{\"goodsShow\":_vm.goodsShow,\"prodList\":_vm.prodListArr},on:{\"changeDig\":_vm.changeDig,\"sureGood\":_vm.sureGood}}),_vm._v(\" \"),_c('el-dialog',{staticClass:\"areaTree TicketDialog\",attrs:{\"title\":'选择门店',\"width\":\"600px\",\"before-close\":_vm.beforeClose,\"visible\":_vm.showCheckTicket},on:{\"update:visible\":function($event){_vm.showCheckTicket=$event}}},[_c('div',{staticClass:\"addScroll\"},[_c('el-checkbox-group',{model:{value:(_vm.checkClick),callback:function ($$v) {_vm.checkClick=$$v},expression:\"checkClick\"}},_vm._l((_vm.checkList),function(item){return _c('el-checkbox',{key:item.SID,attrs:{\"label\":item.SID}},[_vm._v(_vm._s(item.Name))])}),1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",staticStyle:{\"text-align\":\"center\"},attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showCheckTicket = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.CheckTicketFun}},[_vm._v(\"确 定\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"preserveStyle\"},[_c('el-button',{on:{\"click\":_vm.cancelFun}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.preserveFun}},[_vm._v(\"保存\")])],1),_vm._v(\" \"),(_vm.codeUrl)?_c('div',{staticClass:\"active-code-style\"},[_c('div',{staticClass:\"active-code-style-title\"},[_vm._v(\"手机微信扫码浏览\")]),_vm._v(\" \"),_c('QRCode',{attrs:{\"newWidth\":200,\"newText\":_vm.activeUrlGood +\n        _vm.codeUrl +\n        '?AppNo=' +\n        _vm.AppNoMy +\n        '&seckill=true&isBrowse=true'}})],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-54579048\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/weChatManager/activityManager/addEdit/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-54579048\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-54579048\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/weChatManager/activityManager/addEdit/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}