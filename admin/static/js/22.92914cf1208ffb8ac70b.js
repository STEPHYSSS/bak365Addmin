webpackJsonp([22],{I1Ct:function(e,t){},VELo:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("woOf"),a=r.n(o),s=r("Xxa5"),n=r.n(s),l=r("exGp"),i=r.n(l),m=r("T+sA"),c=r("nkvz"),d=r("LxfK"),f=r("R2SV"),u={name:"evaluateInfo",components:{imgLoad:c.a,mallGoods:d.a},data:function(){return{loading:!1,btnLoading:!1,form:{Leves:"1",StarClass:5,IsShow:"1"},optionLeves:f.g,optionsType:f.j,rules:{Type:[{required:!0,message:"请选择评价类型",trigger:"change"}],GoodsId:[{required:!0,message:"请选择商品ID",trigger:"blur"}],Details:[{required:!0,message:"请填写评价",trigger:"blur"}]},goodsShow:!1}},created:function(){this.$route.query.SID&&this.getInfo()},computed:{current_add:function(){return!this.$route.query.SID||!1}},methods:{setImg:function(e){return"../"+e},getInfo:function(){var e=this;return i()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,Object(m.a)({Action:"GetAppraisement",SID:e.$route.query.SID},"MAppraisementOpera");case 4:r=t.sent,e.form=r.Data.Appraisement,e.form.ImgList=e.form.ImgList?e.form.ImgList.split(","):[],e.form.StarClass=Number(e.form.StarClass),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e.$message.error(t.t0);case 13:e.loading=!1;case 14:case"end":return t.stop()}},t,e,[[0,10]])}))()},submitReply:function(){var e,t=this;this.btnLoading=!0,this.$refs.form.validate((e=i()(n.a.mark(function e(r){var o,s,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=21;break}if(o={},a()(o,{Action:"SetAppraisement"}),a()(o,{SID:t.$route.params.id}),a()(o,{Type:t.form.Type}),a()(o,t.form),o.ImgList){if(o.ImgList.length>0)for(s=0;s<o.ImgList.length;s++)l=o.ImgList[s],o.ImgList[s]=-1!==l.indexOf("../")?l.replace("../",""):l;"string"!=typeof o.ImgList&&(o.ImgList=o.ImgList.join(","))}return e.prev=7,e.next=10,Object(m.a)(o,"MAppraisementOpera");case 10:t.$message.success("提交成功"),t.btnLoading=!1,t.$router.push("/weChat/manager/userEvaluate/index"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),t.$message.error(e.t0),t.btnLoading=!1;case 19:e.next=22;break;case 21:return e.abrupt("return",!1);case 22:case"end":return e.stop()}},e,t,[[7,15]])})),function(t){return e.apply(this,arguments)}))},upLoadImg:function(e){for(var t=[],r=e,o=0;o<r.length;o++)t.push(r[o].url);this.form.ImgList=t},resetForm:function(e){this.$refs[e].resetFields(),this.$refs.imgLoad.currentImgs=[],this.form.ImgList="",this.form.StarClass=5,this.form.Leves="1"},selectGoods:function(){this.goodsShow=!0},changeDig:function(e){this.goodsShow=e},sureGood:function(e){this.form.GoodsId=e.SID}}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"evaluateInfo"},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px",rules:e.rules}},[e.current_add?r("el-form-item",{attrs:{label:"评价类型：",prop:"Type"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.Type,callback:function(t){e.$set(e.form,"Type",t)},expression:"form.Type"}},e._l(e.optionsType,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),e.current_add?e._e():r("el-form-item",{attrs:{label:"商品名称："}},[r("span",[e._v(e._s(e.form.Name?e.form.Name:"--"))])]),e._v(" "),r("el-form-item",{attrs:{label:"商品ID：",prop:"GoodsId"}},[e.current_add?r("el-input",{attrs:{placeholder:"请添加商品ID"},model:{value:e.form.GoodsId,callback:function(t){e.$set(e.form,"GoodsId",t)},expression:"form.GoodsId"}}):r("span",[e._v(e._s(e.form.GoodsId?e.form.GoodsId:"--"))]),e._v(" "),e.current_add?r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"medium"},on:{click:e.selectGoods}},[e._v("...")]):e._e()],1),e._v(" "),e.current_add?e._e():r("el-form-item",{attrs:{label:"操作人ID："}},[e.form.OperatorID?r("span",[e._v(e._s(e.form.OperatorID))]):r("span",[e._v("--")])]),e._v(" "),e.current_add?e._e():r("el-form-item",{attrs:{label:"添加时间："}},[e._v(e._s(e.form.AddTime))]),e._v(" "),r("el-form-item",{attrs:{label:"评价内容：",prop:"Details"}},[e.current_add?r("div",[e.current_add?r("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:e.form.Details,callback:function(t){e.$set(e.form,"Details",t)},expression:"form.Details"}}):e._e(),e._v(" "),r("imgLoad",{ref:"imgLoad",staticStyle:{"margin-top":"10px"},attrs:{folder:"TicketImg"},on:{upLoadImgs:e.upLoadImg}})],1):r("div",[e.form.Details?r("span",[e._v(e._s(e.form.Details))]):e._e(),e._v(" "),r("br"),e._v(" "),e.form.ImgList.length>0?r("div",e._l(e.form.ImgList,function(t){return r("div",{key:t,staticClass:"DetailsImg"},[r("img",{attrs:{src:e.setImg(t),alt:"",onclick:"window.open()"}})])}),0):e._e()])]),e._v(" "),r("el-form-item",{staticStyle:{"vertical-align":"middle"},attrs:{label:"星级："}},[r("el-rate",{staticStyle:{"line-height":"2.5"},attrs:{disabled:!e.current_add,"disabled-void-color":"#C0C4CC","show-score":"","text-color":"#ff9900"},model:{value:e.form.StarClass,callback:function(t){e.$set(e.form,"StarClass",t)},expression:"form.StarClass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"回复评价内容：",prop:"Reply"}},[r("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:e.form.Reply,callback:function(t){e.$set(e.form,"Reply",t)},expression:"form.Reply"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"评价置顶级别："}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.Leves,callback:function(t){e.$set(e.form,"Leves",t)},expression:"form.Leves"}},e._l(e.optionLeves,function(e){return r("el-option",{key:e.leves,attrs:{label:e.name,value:e.leves}})}),1),e._v(" "),r("div",{staticStyle:{color:"#999"}},[e._v("级别一样的按时间顺序排序")])],1),e._v(" "),r("el-form-item",{attrs:{label:"默认显示："}},[r("el-radio",{attrs:{label:"1"},model:{value:e.form.IsShow,callback:function(t){e.$set(e.form,"IsShow",t)},expression:"form.IsShow"}},[e._v("开启")]),e._v(" "),r("el-radio",{attrs:{label:"0"},model:{value:e.form.IsShow,callback:function(t){e.$set(e.form,"IsShow",t)},expression:"form.IsShow"}},[e._v("关闭")])],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-top":"30px"}},[r("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.submitReply}},[e._v("提交")]),e._v(" "),e.current_add?r("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")]):e._e()],1)],1),e._v(" "),r("mall-goods",{attrs:{goodsShow:e.goodsShow,isEvaluate:!0},on:{changeDig:e.changeDig,sureGood:e.sureGood}})],1)},staticRenderFns:[]};var v=r("VU/8")(u,p,!1,function(e){r("I1Ct")},null,null);t.default=v.exports}});
//# sourceMappingURL=22.92914cf1208ffb8ac70b.js.map