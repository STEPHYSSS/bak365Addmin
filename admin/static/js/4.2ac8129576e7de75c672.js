webpackJsonp([4],{"9bBU":function(t,e,n){n("mClu");var o=n("FeBl").Object;t.exports=function(t,e,n){return o.defineProperty(t,e,n)}},C4MV:function(t,e,n){t.exports={default:n("9bBU"),__esModule:!0}},Hik7:function(t,e){},VFEf:function(t,e,n){"use strict";var o=n("bOdI"),r=n.n(o),a=n("Xxa5"),i=n.n(a),c=n("exGp"),s=n.n(c),l=n("8YEZ"),u=n("mvu0"),d=n("T+sA"),p=n("2uFj"),v=n("Ua8o"),f=n("lbHh"),h=n.n(f),_=n("V19L"),m={name:"",data:function(){return{dataList:[],allData:[],loading:!1,cateShow:!1,show:!1,AppNoMy:h.a.get("AppNo"),activeUrlGood:p.d,currentIndexCode:"",current_index:"",current_SID:"",activeType:"1",current_Status:"",current_Open:""}},props:["activeTypeShow"],components:{ModifyCate:l.a,QRCode:_.a,Del:u.a},created:function(){this.getList()},methods:{getList:function(){var t=this;return s()(i.a.mark(function e(){var n,o,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,Object(d.a)({Action:"GetPromotionList",Type:t.activeTypeShow},"MPromotionOpera");case 4:n=e.sent,o=n.Data,t.loading=!1,(r=o.PromotionList||[]).forEach(function(e){e.codeUrl=t.activeUrlGood+"?SID="+e.SID+"&AppNo="+t.AppNoMy+"&seckill=true"}),t.allData=r,t.dataList=r,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),t.$message.error(e.t0),t.loading=!1;case 17:case"end":return e.stop()}},e,t,[[0,13]])}))()},setActiveType:function(t){return"1"==t&&t==this.activeTypeShow?"秒杀活动":"5"==t&&t==this.activeTypeShow?"团购活动":void 0},changeEnable:function(t,e){var n=this;return s()(i.a.mark(function o(){return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(n.current_Status="1"===t.Audit?"0":"1",n.current_Open="1"===t.Start?"0":"1",o.prev=2,"Audit"!==e){o.next=11;break}return o.next=6,Object(d.a)(r()({Action:"SetPromAudit",SID:t.SID},e,n.current_Status),"MPromotionOpera");case 6:o.sent,n.$message.success("操作成功"),n.getList(),o.next=16;break;case 11:return o.next=13,Object(d.a)(r()({Action:"SetPromStart",SID:t.SID},e,n.current_Open),"MPromotionOpera");case 13:o.sent,n.$message.success("操作成功"),n.getList();case 16:o.next=22;break;case 18:o.prev=18,o.t0=o.catch(2),setTimeout(function(){t.Start=!t.Start},500),n.$message.error(o.t0);case 22:case"end":return o.stop()}},o,n,[[2,18]])}))()},copyUrl:function(t){var e=$(".el-popover").length-1;$($(".el-popover")[e]).find("input").select(),document.execCommand("Copy"),this.$Message.info("复制成功"),t.visibleUrl=!1},editRowGoods:function(t){"1"==this.activeTypeShow?this.$router.push({path:"/weChat/manager/activity/goodAdd",query:{SID:t.SID}}):"5"==this.activeTypeShow&&this.$router.push({path:"/weChat/manager/activity/groupGoodAdd",query:{SID:t.SID}})},delRow:function(t,e){this.show=!0,this.current_index=e,this.current_SID=t.SID},clicCode:function(t){this.currentIndexCode=t},upDownUrl:function(t){Object(v.b)(t)},cateFunction:function(t){this.cateShow=t},modifyCateFun:function(){this.cateShow=!0},delFunction:function(t){this.show=t},confirmEnd:function(){var t=this;return s()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.a)({Action:"RemovePromotion",SID:t.current_SID},"MPromotionOpera");case 3:t.dataList.splice(t.current_index,1),t.$message.success("删除成功"),t.show=!1,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t.show=!1,t.$message.error(e.t0);case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()}},filters:{setActiveStatus:function(t){return"1"===t?"已审核":"未审核"},setActiveOpen:function(t){return"1"===t?"启用":"停用"}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activeGoods"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList}},[n("el-table-column",{attrs:{label:"活动名称",width:"250",prop:"Name",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"SID",label:"商品编号",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"Type",label:"活动类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.setActiveType(e.row.Type)))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"TimeName",label:"活动状态",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"审核状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("setActiveStatus")(e.row.Audit)))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"是否关闭",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("setActiveOpen")(e.row.Start)))]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"300",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"left"},model:{value:e.row.visibleUrl,callback:function(n){t.$set(e.row,"visibleUrl",n)},expression:"scoped.row.visibleUrl"}},[n("el-input",{attrs:{readonly:"",placeholder:"商品链接"},model:{value:e.row.codeUrl,callback:function(n){t.$set(e.row,"codeUrl",n)},expression:"scoped.row.codeUrl"}},[n("el-button",{attrs:{slot:"append"},on:{click:function(n){return t.copyUrl(e.row)}},slot:"append"},[t._v("复制")])],1),t._v(" "),n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("链接")])],1),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.editRowGoods(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.delRow(e.row,e.$index)}}},[t._v("删除")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.changeEnable(e.row,"Audit")}}},[t._v("审核")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.changeEnable(e.row,"Start")}}},[t._v("关闭")]),t._v(" "),n("el-popover",{attrs:{placement:"left"},model:{value:e.row.visible,callback:function(n){t.$set(e.row,"visible",n)},expression:"scoped.row.visible"}},[n("div",{staticClass:"smallRoutine"},[n("div",{staticClass:"smallRoutineTop"},[n("span",[t._v("小程序码")]),t._v(" "),n("span",{staticClass:"close",on:{click:function(t){e.row.visible=!1}}},[t._v("×")])]),t._v(" "),n("div",{staticStyle:{width:"200px",height:"200px",border:"1px solid #efefef"}},[t.currentIndexCode===e.$index?n("QRCode",{attrs:{newWidth:200,newText:e.row.codeUrl}}):t._e()],1),t._v(" "),n("a",{attrs:{id:"downloadImg"}}),t._v(" "),e.row.Audit?t._e():n("a",{staticClass:"smallRoutineUpDown",on:{click:function(n){return t.upDownUrl(e.row.Name)}}},[t._v("可下载小程序码")]),t._v(" "),e.row.Audit?n("a",{staticClass:"smallRoutineUpDown"},[t._v("供浏览的二维码")]):t._e()]),t._v(" "),n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{slot:"reference",type:"text"},on:{click:function(n){return t.clicCode(e.$index)}},slot:"reference"},[t._v("小程序码")])],1)]}}])})],1),t._v(" "),n("Del",{attrs:{show:t.show},on:{delFunction:t.delFunction,confirmEnd:t.confirmEnd}}),t._v(" "),n("ModifyCate",{attrs:{cateShow:t.cateShow,isIntegral:!0},on:{cateFunction:t.cateFunction}})],1)},staticRenderFns:[]};var b=n("VU/8")(m,w,!1,function(t){n("WN8C")},null,null);e.a=b.exports},WN8C:function(t,e){},bOdI:function(t,e,n){"use strict";e.__esModule=!0;var o,r=n("C4MV"),a=(o=r)&&o.__esModule?o:{default:o};e.default=function(t,e,n){return e in t?(0,a.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},mClu:function(t,e,n){var o=n("kM2E");o(o.S+o.F*!n("+E39"),"Object",{defineProperty:n("evD5").f})},olCJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"",data:function(){return{activeTypeShow:"5"}},components:{activeGoodsList:n("VFEf").a},methods:{addGood:function(){this.$router.push({path:"/weChat/manager/activity/groupGoodAdd"})}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"activeGoods"},[e("div",{staticStyle:{"margin-bottom":"20px"}},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:this.addGood}},[this._v("添加活动商品")])],1),this._v(" "),e("activeGoodsList",{attrs:{activeTypeShow:this.activeTypeShow}})],1)},staticRenderFns:[]};var a=n("VU/8")(o,r,!1,function(t){n("Hik7")},null,null);e.default=a.exports}});
//# sourceMappingURL=4.2ac8129576e7de75c672.js.map